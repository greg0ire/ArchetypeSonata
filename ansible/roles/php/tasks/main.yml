---
- name: Add ppa repository
  apt_repository:
    repo: ppa:ondrej/{{ php.ppa }}

- name: Update apt
  apt:
    update_cache: yes

- name: Install php5
  apt:
    pkg: '{{ item }}'
    state: latest
  with_items:
    - php5

- name: Install php5 packages
  apt:
    pkg: '{{ item }}'
    state: latest
  with_items: '{{ php.packages }}'
  when: php.packages is defined

- include: php-mod.yml
- include: php-cli.yml
